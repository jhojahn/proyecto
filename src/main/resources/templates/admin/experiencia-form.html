<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Experiencia</title>
    <style>
        body{background:#6c63ff;font-family:Arial}
        .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center}
        .card{background:#fff;padding:25px;border-radius:16px;width:850px}
        .grid{display:grid;grid-template-columns:1fr 1fr;gap:14px}
        input{width:100%;padding:10px;border-radius:10px;border:1px solid #ccc}
        .actions{display:flex;gap:10px;justify-content:flex-end;margin-top:15px}
        button{padding:10px 16px;border-radius:12px;font-weight:600;border:1px solid #ddd;background:#f5f5f5;cursor:pointer}
        .save{background:#6c63ff;color:white;border:none}
        .list{margin-top:20px;border-top:1px solid #eee;padding-top:16px}
        .item{display:flex;justify-content:space-between;gap:16px;align-items:flex-start;padding:12px;border:1px solid #eee;border-radius:12px;margin-top:10px}
        .del{background:#ff5c5c;color:white;border:none}
        a{text-decoration:none}
        p{margin:6px 0}
        h4{margin:0 0 6px 0}
    </style>
</head>

<body>
<div class="wrap">
    <div class="card">

        <h2>Agregar Experiencia</h2>

        <form th:action="@{/admin/experiencias/guardar}" th:object="${experiencia}" method="post">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

            <div class="grid">
                <input th:field="*{puesto}" placeholder="Puesto">
                <input th:field="*{empresa}" placeholder="Empresa">
                <input type="date" th:field="*{fecha_inicio}">
                <input type="date" th:field="*{fecha_fin}">
            </div>

            <input th:field="*{descripcion}" placeholder="Descripción" style="margin-top:14px">

            <div class="actions">
                <button class="save" type="submit">Guardar</button>
                <a th:href="@{/admin}"><button type="button">Volver al panel</button></a>
            </div>
        </form>

        <div class="list">
            <h3 style="margin:0">Añadidos</h3>

            <div th:if="${#lists.isEmpty(experiencias)}" style="color:#666;margin-top:10px">
                No hay experiencia todavía.
            </div>

            <div class="item" th:each="e : ${experiencias}">
                <div>
                    <h4 th:text="${e.puesto}">Puesto</h4>
                    <p><b>Empresa:</b> <span th:text="${e.empresa}">---</span></p>
                    <p><b>Descripción:</b> <span th:text="${e.descripcion}">---</span></p>
                    <p style="margin-top:6px;color:#888">
                        <span th:text="${#dates.format(e.fecha_inicio,'yyyy-MM-dd')}">2026-01-01</span>
                        -
                        <span th:text="${#dates.format(e.fecha_fin,'yyyy-MM-dd')}">2026-02-01</span>
                    </p>
                </div>

                <form th:action="@{/admin/experiencias/{id}(id=${e.id})}" method="post">
                    <input type="hidden" name="_method" value="delete"/>
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                    <button type="submit" class="del">Eliminar</button>
                </form>
            </div>
        </div>

    </div>
</div>
</body>
</html>
